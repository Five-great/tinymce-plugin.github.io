console.log(tinymce.I18n);tinymce.PluginManager.add("tpCollapse",function(e,k){var d="collapse",n=tinymce.util.Tools.resolve("tinymce.util.I18n"),c=tinymce.util.Tools.resolve("tinymce.util.XHR");const o=e.tp$.Tools,g=e.tp$.Component;e.tp$.PanelComponents,c.send({url:"/tinymce/plugins/tpCollapse/collapse.css",async:!1,dataType:"text",success:function(t){g.setCustomTags("collapse","styleSheetLoadList",{default:t},e)},error:function(t){}});var u=function(){e.dom},y=function(t){return'style="'+o.getFormatStyle({width:o.autoToPX(t.width),"border-radius":o.autoToPX(t.borderRadius),margin:o.autoToPX(t.margin)||"0 auto",background:t.BackgroundColor})+'" '},b=function(t){return'style="'+o.getFormatStyle({padding:o.autoToPX(t.mainPadding),background:t.mainBackgroundColor,"border-width":o.autoToPX(t.mainBorderWidth),"border-style":t.mainBorderStyle,"border-color":t.mainBorderColor})+'" '},C=function(t){return'data-top-style="'+o.getFormatStyle({padding:o.autoToPX(t.topPadding)||"1px 40px",background:t.topBackgroundColor,"border-width":o.autoToPX(t.topBorderWidth),"border-style":t.topBorderStyle,"border-color":t.topBorderColor})+'" '+(t.styleTemplates&&'data-template="'+t.styleTemplates+'"')},m=function(t,l){e.undoManager.transact(function(){if(e.focus(),l){e.dom.setStyles(l,{width:o.autoToPX(t.width),margin:o.autoToPX(t.margin),"border-radius":o.autoToPX(t.borderRadius)}),e.dom.setStyles(l.firstChild,{padding:o.autoToPX(t.topPadding)||"1px 0",background:t.topBackgroundColor,"border-width":o.autoToPX(t.topBorderWidth),"border-style":t.topBorderStyle,"border-color":t.topBorderColor}),e.dom.setAttrib(l,"data-top-style",o.getFormatStyle({padding:o.autoToPX(t.topPadding)||"1px 0",background:t.topBackgroundColor,"border-width":o.autoToPX(t.topBorderWidth),"border-style":t.topBorderStyle,"border-color":t.topBorderColor}));let r={padding:o.autoToPX(t.mainPadding),background:t.mainBackgroundColor,"border-width":o.autoToPX(t.mainBorderWidth),"border-style":t.mainBorderStyle,"border-color":t.mainBorderColor};e.dom.setStyles(l.lastChild.firstChild,r),l.tpComponentCmd("upData",{editor:e,style:o.getFormatStyle(r)})}else{var a="tp$collapseID"+new Date().getTime();e.insertContent('<tp-collapse data-id="'+a+'" '+y(t)+" "+C(t)+" ><p>"+n.translate("Title")+' </p><div class="tp-collapse_main"  '+b(t)+" ><p>"+n.translate("Write here")+"</p></div></tp-collapse>")}})};e.ui.registry.getAll().icons.tpCollapse||e.ui.registry.addIcon("tpCollapse",'<svg t="1628739072141" class="icon" width="24px" viewBox="0 0 1024 1024"   version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2771" width="200" height="200"><path d="M384 620.032c0 5.376-1.984 10.048-5.952 14.08C374.08 638.08 369.344 640 364.032 640L83.968 640c-5.376 0-10.112-1.92-14.08-5.952C65.92 630.08 64 625.344 64 620.032s1.92-10.048 5.952-14.08L209.92 465.984C213.888 462.016 218.624 460.032 224 460.032s10.048 1.984 14.08 6.016l140.032 139.968C382.016 609.92 384 614.656 384 620.032zM960 352C960 369.664 945.664 384 928 384l-448 0C462.336 384 448 369.664 448 352l0 0C448 334.336 462.336 320 480 320l448 0C945.664 320 960 334.336 960 352L960 352zM960 480C960 497.664 945.664 512 928 512l-448 0C462.336 512 448 497.664 448 480l0 0C448 462.336 462.336 448 480 448l448 0C945.664 448 960 462.336 960 480L960 480zM960 608c0 17.6-14.336 32-32 32l-448 0C462.336 640 448 625.6 448 608l0 0C448 590.272 462.336 576 480 576l448 0C945.664 576 960 590.272 960 608L960 608zM960 736c0 17.6-14.336 32-32 32l-448 0C462.336 768 448 753.6 448 736l0 0C448 718.272 462.336 704 480 704l448 0C945.664 704 960 718.272 960 736L960 736z" p-id="2772"></path></svg>');var h=function(){return e.dom.getParent(e.selection.getNode(),"tp-collapse")},v={type:"panel",title:"Panel head",items:[{type:"htmlpanel",html:'<div style="width: 100%; border-bottom: 1px solid #ccc; color: rgba(34,47,62,.7); padding: 4px 0; margin-bottom: 5px; margin-top: -5px;"> '+n.translate("Collapse")+" "+n.translate("Panel head")+"</div>"},{type:"grid",columns:2,items:[{type:"input",name:"topPadding",label:"Padding"},{type:"colorinput",name:"topBackgroundColor",label:"Background Color"}]},{type:"grid",columns:2,items:[{type:"input",name:"topBorderWidth",label:"Border Width"},{name:"topBorderStyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]},{type:"grid",columns:2,items:[{type:"colorinput",name:"topBorderColor",label:"Border color"}]}]},x={type:"panel",title:"Panel main",items:[{type:"htmlpanel",html:'<div style="width: 100%; border-bottom: 1px solid #ccc; color: rgba(34,47,62,.7); padding: 4px 0; margin-bottom: 5px; margin-top: -5px;"> '+n.translate("Collapse")+" "+n.translate("Panel main")+"</div>"},{type:"grid",columns:2,items:[{type:"input",name:"mainPadding",label:"Padding"},{type:"colorinput",name:"mainBackgroundColor",label:"Background Color"}]},{type:"grid",columns:2,items:[{type:"input",name:"mainBorderWidth",label:"Border Width"},{name:"mainBorderStyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]},{type:"grid",columns:2,items:[{type:"colorinput",name:"mainBorderColor",label:"Border color"}]}]},B={type:"panel",title:"General",items:[{type:"grid",columns:2,items:[{type:"input",name:"width",label:"Width"},{type:"input",name:"margin",label:"Margin"}]},{type:"grid",columns:2,items:[{type:"input",name:"borderRadius",label:"border Radius"},{name:"styleTemplates",type:"listbox",label:"Templates Style",items:[{text:"Select...",value:"default"}]}]}]},S={type:"panel",title:"Advanced",items:[{type:"htmlpanel",html:'<div style="width: 100%; border-bottom: 1px solid #ccc; color: rgba(34,47,62,.7); padding: 4px 0; margin-bottom: 5px; margin-top: -5px;">'+n.translate("Please waiting...")+" </div>"}]},i=[];i.push(B),i.push(v),i.push(x),i.push(S),!window.tp$State&&(window.tp$State={hhh:0}),window.tp$State.iframeLayout={margin:"2px",padding:"2px"};var f=function(t){return t?{width:e.dom.getSize(t).w+"px",margin:e.dom.getStyle(t,"margin"),styleTemplates:"default",borderRadius:e.dom.getStyle(t,"border-radius"),topPadding:e.dom.getStyle(t.firstChild,"padding"),topBackgroundColor:e.dom.toHex(e.dom.getStyle(t.firstChild,"background-color")),topBorderColor:e.dom.toHex(e.dom.getStyle(t.firstChild,"border-color")),topBorderStyle:e.dom.getStyle(t.firstChild,"border-style"),topBorderWidth:e.dom.getStyle(t.firstChild,"border-width")+"",mainPadding:e.dom.getStyle(t.lastChild.firstChild,"padding"),mainBackgroundColor:e.dom.toHex(e.dom.getStyle(t.lastChild.firstChild,"background-color")),mainBorderColor:e.dom.toHex(e.dom.getStyle(t.lastChild.firstChild,"border-color")),mainBorderStyle:e.dom.getStyle(t.lastChild.firstChild,"border-style"),mainBorderWidth:e.dom.getStyle(t.lastChild.firstChild,"border-width")+""}:{width:((e.dom.doc.body.clientWidth-6)/e.dom.doc.body.clientWidth*100).toFixed(2)+"%",styleTemplates:"default"}},w=function(t){let l=h(),a=f(l);var r={title:d,body:{type:"tabpanel",tabs:i},buttons:[{type:"cancel",name:"closeButton",text:"Cancel"},{type:"submit",name:"Save",text:"Save",primary:!0}],initialData:a,onSubmit:function(p){var s=p.getData();console.log(s),m(s,l),p.close()}};e.windowManager.open(r)},P=function(t){},T=function(t,l,a){const r=function(p,s){a.setActive(p),P(s.node)};return t.selection.selectorChangedWithUnbind(l.join(","),r).unbind};return e.ui.registry.addToggleButton("tpCollapse",{icon:"tpCollapse",tooltip:d,onAction:function(){console.log(e.selection),w()},onSetup:function(t){u(),T(e,["tp-collapse"],t)}}),e.ui.registry.addMenuItem("tpCollapse",{text:d,icon:"tpCollapse",onSetup:function(){u()},onAction:function(){e.windowManager.open(dialogConfig)}}),e.addCommand("tpCollapse",m),{getMetadata:function(){return{name:d,url:"https://github.com/Five-great/tinymce-plugins"}}}});
